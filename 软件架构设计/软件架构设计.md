# 软件架构设计
## 定义
1. 软件或计算机系统的软件架构是该系统的一个(或多个)结构,而结构由软件元素、元素的外部可见属性及他们之间的关系组成
2. 软件架构为软件系统提供了一个结构、行为和属性的高级抽象，由构成系统元素的描述、这些元素的互相作用、指导元素集成的模式及这些模式的约束组成
3. 软件架构是指一个系统的基础组织，它具体体现在: 系统的构建。构件之间、构建与环境之间的关系，以及指导其设计和演化的原则上

## 架构模型
### 结构模型
- 这是一个最直观、最普遍的建模方式。这种方法以架构的组件、连接件和其他概念来刻画结构,并力图通过结构来反映系统的重要语义内容,包括系统的配置、约束、隐含的假设条件、风格、性质。

### 框架模型
- 框架模型与结构模型类似，但它不太侧重描述结构的细节而更侧重于整体的结构。框架模型主要以一些特殊的问题为目标建立只针对和适应该问题的结构

### 动态模型
- 动态模型是对结构或框架模型的补充，研究系统"大颗粒"的行为性质.

### 过程模型
- 过程模型研究构造系统的步骤和过程。因而结构是遵循某些过程脚本的结果

### 功能模型
- 该模型认为架构由一组功能构件按层次组成，且下层向上层提供服务


### 4+1 视图
1. 逻辑视图
    主要支持系统的功能需求,即系统提供给最终用户的服务.
    在逻辑视图中,系统分解成一系列的功能抽象,这些抽象主要来自问题领域.
    在面向对象技术中,通过抽象、封装和集成，可以用对象模型来代表逻辑视图，用类图来描述逻辑视图。
    逻辑视图中使用的风格为面向对象的风格,逻辑视图设计中要主要的主要问题是要保持一个单一的、内聚的对象模型贯穿整个系统
2. 开发试图(模块视图)
    主要侧重于软件模块的组织和管理.
3. 进程视图
    侧重于系统的运行特性,主要关注一些非功能性的需求
    进程视图强调: 并发性、分布性、系统继承性和容错能力
4. 物理视图
    考虑如何把软件映射到硬件上,它通常要考虑到解决系统拓扑结构、系统安装、通信的问题
5. 场景
    重要系统活动的抽象，它使四个视图有机的联系起来
    场景是最重要的需求抽象
    
逻辑视图和开发视图描述系统的静态结构。进程视图和物理视图描述系统的动态结构

## 软件质量属性
- 软件质量特性包括: **功能性、可靠性、易用性、效率、可维护性、可移植性**
- 功能性
    - 适合性
    - 准确性
    - 互操作性
    - 依从性
    - 安全性
- 可靠性
    - 成熟性
    - 容错性
    - 易恢复性
- 易用性
    - 易理解性
    - 易学性
    - 易操作性
- 效率
    - 时间特性
    - 资源特性
- 可维护性
    - 易分析性
    - 易改变性
    - 稳定性
    - 易测试性
- 可移植性
    - 适应性
    - 易安装性
    - 遵循性
    - 易替换性
    
    
## 软件架构风格
- 分类
1. 数据流风格
    批处理序列, 管道-过滤器
2. 调用/返回风格
    主程序-子程序。
    面向对象风格: 层次结构
3. 独立构件风格
    进程通信
    事件系统
4. 虚拟机风格
    解释器
    基于规则的系统
5. 仓库风格
    数据库系统
    超文本系统
    黑板系统
    
### 数据流风格
#### 批处理序列
- 批处理风格的每一步都是独立的,并且每一步都是顺序执行,数据传送在步与步之间作为整体
典型应用
1. 经典数据处理
2. 程序开发
3. windows bat 脚本

#### 管道和过滤器
- 每个构件都有一组输入和输出,构件读输入shu的数据流,经过内部处理然后产生输出流
特点
1. 是的软构件具有良好的隐蔽性和高内聚、低耦合的特点
2. 允许设计者将整个系统的输入/输出行为看成是多个过滤器的行为的简单合成
3. 支持软件重用. 只要提供适合在两个过滤器之间传送的数据，任何两个过滤器都可以被连接起来
4. 系统维护和增强系统性能简单.新的过滤器可以添加到现有系统中来,旧的可以被改进的过滤器替换
5. 允许对吞吐量,死锁等属性的分析
6. 支持并行执行.每个过滤器是作为一个单独的任务完成.
缺点
1. 导致进程成为批处理的结构.
2. 不适合处理交互的应用
3. 因为在数据传输上没有通用的标准,每个过滤器都增加了解析和合成数据的工作，导致系统性能下降,并增加了编写过滤器的复杂性


#### 对比
- 共同点:
    1. 把任务分成一系列固定顺序的计算单元,组件之间只通过数据传递交互
- 区别
    1. 批处理是全部的,搞潜伏性的,输入时可以随机存取,无合作性、无交互性、
        管道-过滤器时递增的,数据结果延迟小,输入时处理局部变化,有反馈、可交互.
    2. 批处理强调数据传输在步与步之间作为一个整体,管道-过滤器没有这个要求
    

### 调用/返回风格
- 指在系统中采用了调用与返回机制.利用调用-返回,实际上是一种分而治之的策略,主要思想**将一个复杂的大系统分解为一些子系统,以便降低复杂度,并且增加可修改性.**
  
#### 主程序/子程序
- 结构化开发时期的经典架构风格. 这种风格一般采用单线程控制,把问题划分为若干处理步骤,构件即为主程序和子程序。子程序通常可以合成为模块

#### 面向对象风格
- 这种风格建立在数据抽象和面向对象的基础上,数据的表示方法和他们的相应操作封装在一个抽象数据类型或对象中.
- 特征
    1. 对象负责维护其表示的完整性
    2. 对象的表示对其他对象而言时隐蔽的
- 优点
    1. 因为对象对其他隐藏的表示,所以可以改变一个对象的表示，而不影响其他的对象
    2. 设计者可将一些数据的存取操作问题分解成为一些交互的代理程序集合
- 问题
    1. 为了使一个对象和另一个对象通过过程调用等进行交互,必须知道对象的标识,只要一个对象的标识变了,就必须修改所有其他明确调用它的对象
    2. 必须修改所有显式调用它的其他对象,并消除由此带来的副作用
    
#### 层次结构风格
- 层次系统组织成一个层次结构,每一层为上层服务,并最为下层客户
- 这种风格支持基于可增加抽象层的设计